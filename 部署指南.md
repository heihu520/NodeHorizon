# Node Horizon ä¾¿æºå¼éƒ¨ç½²æŒ‡å—

## ğŸ“¦ æ‰“åŒ…æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨æ‰“åŒ…è„šæœ¬ï¼ˆæ¨èï¼‰

1. **è¿è¡Œæ‰“åŒ…è„šæœ¬**

   ```powershell
   cd f:\aggregator_gui
   .\build_portable.bat
   ```

2. **æ‰“åŒ…ç»“æœ**
   - è¾“å‡ºç›®å½•ï¼š`F:\NodeHorizon_Portable`
   - åŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶

3. **åˆ›å»ºåˆ†å‘åŒ…**

   ```powershell
   # å‹ç¼©ä¸º ZIP æ–‡ä»¶
   Compress-Archive -Path "F:\NodeHorizon_Portable\*" -DestinationPath "F:\NodeHorizon_v1.0.zip"
   ```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ‰“åŒ…

åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
NodeHorizon_Portable/
â”œâ”€â”€ NodeHorizon.exe           # ä¸»ç¨‹åº
â”œâ”€â”€ my-config.json.template   # é…ç½®æ¨¡æ¿
â”œâ”€â”€ README.md                 # è‹±æ–‡è¯´æ˜
â”œâ”€â”€ README_CN.md              # ä¸­æ–‡è¯´æ˜
â”œâ”€â”€ LICENSE                   # å¼€æºåè®®
â””â”€â”€ runtime/                  # è¿è¡Œæ—¶ä¾èµ–
    â”œâ”€â”€ subscribe/            # Python çˆ¬è™«è„šæœ¬
    â”‚   â”œâ”€â”€ process.py
    â”‚   â”œâ”€â”€ crawl.py
    â”‚   â”œâ”€â”€ utils.py
    â”‚   â””â”€â”€ ...
    â”œâ”€â”€ clash/                # Clash æµ‹è¯•å·¥å…·
    â”‚   â””â”€â”€ clash-windows-amd64.exe
    â”œâ”€â”€ subconverter/         # æ ¼å¼è½¬æ¢å·¥å…·
    â”‚   â””â”€â”€ subconverter.exe
    â””â”€â”€ data/                 # æ•°æ®ç›®å½•ï¼ˆå¯é€‰ï¼‰
```

**æ‰‹åŠ¨å¤åˆ¶å‘½ä»¤**ï¼š

```powershell
# åˆ›å»ºç›®å½•
New-Item -ItemType Directory -Path "F:\NodeHorizon_Portable\runtime" -Force

# å¤åˆ¶ä¸»ç¨‹åº
Copy-Item "F:\NodeHorizon_Project\NodeHorizon.exe" "F:\NodeHorizon_Portable\"

# å¤åˆ¶è¿è¡Œæ—¶ä¾èµ–
Copy-Item "F:\NodeHorizon_Project\subscribe" "F:\NodeHorizon_Portable\runtime\" -Recurse
Copy-Item "F:\NodeHorizon_Project\clash" "F:\NodeHorizon_Portable\runtime\" -Recurse
Copy-Item "F:\NodeHorizon_Project\subconverter" "F:\NodeHorizon_Portable\runtime\" -Recurse

# å¤åˆ¶é…ç½®å’Œæ–‡æ¡£
Copy-Item "F:\NodeHorizon_Project\my-config.json" "F:\NodeHorizon_Portable\my-config.json.template"
Copy-Item "F:\NodeHorizon_Project\README.md" "F:\NodeHorizon_Portable\"
Copy-Item "F:\NodeHorizon_Project\README_CN.md" "F:\NodeHorizon_Portable\"
Copy-Item "F:\NodeHorizon_Project\LICENSE" "F:\NodeHorizon_Portable\"
```

---

## ğŸš€ åœ¨å…¶ä»–ç”µè„‘ä¸Šéƒ¨ç½²

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11 (64ä½)
- **Python**: 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- **ç½‘ç»œ**: éœ€è¦äº’è”ç½‘è¿æ¥

### éƒ¨ç½²æ­¥éª¤

1. **è§£å‹æ–‡ä»¶**
   - å°† `NodeHorizon_v1.0.zip` è§£å‹åˆ°ä»»æ„ç›®å½•
   - ä¾‹å¦‚ï¼š`C:\Program Files\NodeHorizon\` æˆ– `D:\Tools\NodeHorizon\`

2. **é…ç½® Python ç¯å¢ƒ**ï¼ˆå¦‚æœç›®æ ‡ç”µè„‘æ²¡æœ‰ Pythonï¼‰

   **é€‰é¡¹ Aï¼šå®‰è£… Python**
   - ä¸‹è½½ï¼š<https://www.python.org/downloads/>
   - å®‰è£…æ—¶å‹¾é€‰ "Add Python to PATH"
   - å®‰è£…ä¾èµ–ï¼š

     ```powershell
     pip install requests pyyaml
     ```

   **é€‰é¡¹ Bï¼šä½¿ç”¨ä¾¿æºå¼ Python**ï¼ˆæ¨èï¼‰
   - ä¸‹è½½ WinPython æˆ– Python Embedded
   - è§£å‹åˆ° `runtime/python/` ç›®å½•

3. **é…ç½® Gist å‡­è¯**
   - é‡å‘½å `my-config.json.template` ä¸º `my-config.json`
   - ç¼–è¾‘æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ GitHub Gist ä¿¡æ¯ï¼š

     ```json
     {
       "cloud": {
         "gistID": "æ‚¨çš„Gist ID",
         "gistToken": "æ‚¨çš„GitHub Token"
       }
     }
     ```

4. **è¿è¡Œç¨‹åº**
   - åŒå‡» `NodeHorizon.exe`
   - é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦å…è®¸é˜²ç«å¢™è®¿é—®

---

## ğŸ”§ é…ç½®è¯´æ˜

### my-config.json å®Œæ•´ç¤ºä¾‹

```json
{
  "cloud": {
    "gistID": "203b7b1b4729739d23d8b0a32f538547",
    "gistToken": "ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  },
  "crawl": {
    "enable": true,
    "threshold": 256,
    "timeout": 5000,
    "exclude": "è¿‡æœŸ|å¤±æ•ˆ|expired|test"
  },
  "domains": [],
  "groups": {},
  "storage": {
    "items": {}
  }
}
```

### è·å– GitHub Token

1. è®¿é—®ï¼š<https://github.com/settings/tokens>
2. ç‚¹å‡» "Generate new token (classic)"
3. å‹¾é€‰æƒé™ï¼š`gist`
4. ç”Ÿæˆå¹¶å¤åˆ¶ Token

### åˆ›å»º Gist

1. è®¿é—®ï¼š<https://gist.github.com/>
2. åˆ›å»ºä¸€ä¸ªæ–°çš„ Gistï¼ˆå¯ä»¥æ˜¯ç©ºçš„ï¼‰
3. å¤åˆ¶ URL ä¸­çš„ Gist IDï¼ˆæœ€åä¸€æ®µå­—ç¬¦ä¸²ï¼‰

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### åŸºæœ¬å·¥ä½œæµç¨‹

1. **å¯åŠ¨ç¨‹åº** â†’ æ‰“å¼€ `NodeHorizon.exe`
2. **é…ç½®ç®¡ç†** â†’ å¡«å†™ Gist å‡­è¯ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
3. **è¿è¡Œçœ‹æ¿** â†’ ç‚¹å‡»"å¯åŠ¨æŠ“å–"å¼€å§‹çˆ¬å–
4. **æ•°æ®é€è§†** â†’ æŸ¥çœ‹ç»“æœå’Œè®¢é˜…é“¾æ¥

### è®¢é˜…é“¾æ¥æ ¼å¼

çˆ¬å–å®Œæˆåï¼Œæ‚¨å¯ä»¥åœ¨"æ•°æ®é€è§†"é¡µé¢è·å–ä»¥ä¸‹é“¾æ¥ï¼š

- **Clash é…ç½®**: `https://gist.githubusercontent.com/{username}/{gistID}/raw/free-clash.yaml`
- **SingBox é…ç½®**: `https://gist.githubusercontent.com/{username}/{gistID}/raw/free-singbox.json`

---

## âš ï¸ å¸¸è§é—®é¢˜

### 1. ç¨‹åºæ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: åŒå‡» EXE æ²¡æœ‰ååº”

**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥æ˜¯å¦å®‰è£…äº† Python
- å³é”® â†’ å±æ€§ â†’ è§£é™¤é˜»æ­¢
- ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ

### 2. çˆ¬è™«æŠ¥é”™ï¼šæ‰¾ä¸åˆ° Python

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤º `python: command not found`

**è§£å†³æ–¹æ¡ˆ**:

```powershell
# æ£€æŸ¥ Python æ˜¯å¦åœ¨ PATH ä¸­
python --version

# å¦‚æœæ²¡æœ‰ï¼Œæ·»åŠ  Python åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡
```

### 3. GitHub Token æ— æ•ˆ

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤º `[GithubCrawl] cannot start crawl`

**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥ Token æ˜¯å¦æ­£ç¡®å¤åˆ¶ï¼ˆæ— å¤šä½™ç©ºæ ¼ï¼‰
- ç¡®è®¤ Token æœ‰ `gist` æƒé™
- Token å¯èƒ½å·²è¿‡æœŸï¼Œé‡æ–°ç”Ÿæˆ

### 4. è®¢é˜…é“¾æ¥æ— æ³•è®¿é—®

**ç—‡çŠ¶**: æµè§ˆå™¨æ‰“å¼€é“¾æ¥æ˜¾ç¤º 404

**è§£å†³æ–¹æ¡ˆ**:

- ç¡®è®¤ Gist ID æ­£ç¡®
- æ£€æŸ¥ Gist æ˜¯å¦ä¸º Public
- ç­‰å¾…å‡ åˆ†é’Ÿï¼ŒGitHub CDN å¯èƒ½æœ‰å»¶è¿Ÿ

---

## ğŸ”„ æ›´æ–°ç¨‹åº

### æ›´æ–°æ­¥éª¤

1. å¤‡ä»½ `my-config.json`
2. ä¸‹è½½æ–°ç‰ˆæœ¬çš„ `NodeHorizon.exe`
3. æ›¿æ¢æ—§çš„ EXE æ–‡ä»¶
4. æ¢å¤ `my-config.json`

### ä¿ç•™æ•°æ®

ä»¥ä¸‹æ–‡ä»¶/ç›®å½•å¯ä»¥ä¿ç•™ï¼š

- `my-config.json` - æ‚¨çš„é…ç½®
- `runtime/data/` - å†å²æ•°æ®ï¼ˆå¦‚æœæœ‰ï¼‰

ä»¥ä¸‹å¯ä»¥åˆ é™¤å¹¶é‡æ–°è§£å‹ï¼š

- `NodeHorizon.exe` - ä¸»ç¨‹åº
- `runtime/subscribe/` - çˆ¬è™«è„šæœ¬
- `runtime/clash/` - Clash å·¥å…·
- `runtime/subconverter/` - è½¬æ¢å·¥å…·

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ—¥å¿—ä½ç½®

- **çˆ¬è™«æ—¥å¿—**: `runtime/subscribe/workflow.log`
- **åº”ç”¨æ—¥å¿—**: åœ¨ç•Œé¢çš„"è¿è¡Œçœ‹æ¿"é¡µé¢æŸ¥çœ‹

### è°ƒè¯•æ¨¡å¼

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡Œ Python è„šæœ¬æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼š

```powershell
cd runtime/subscribe
python process.py ../../my-config.json
```

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäºåŸå§‹ aggregator é¡¹ç›®å¼€å‘ï¼Œéµå¾ªç›¸åŒçš„å¼€æºåè®®ã€‚

è¯¦è§ `LICENSE` æ–‡ä»¶ã€‚
