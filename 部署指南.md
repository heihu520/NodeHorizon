# Node Horizon 部署指南 (成品版)

## 📦 包含内容

本软件包为**完整成品**，直接解压即可使用。同时也包含完整源代码，支持基于源码的高级运行与二次开发。

### 目录结构说明

```
NodeHorizon/
├── NodeHorizon.exe           # 主程序 (GUI入口)
├── README.md                 # 说明文档
├── requirements.txt          # Python依赖列表
└── runtime/                  # 运行时核心与源码 (配置文件需在此目录)
    ├── my-config.json        # 配置文件 (核心配置)
    ├── subscribe/            # Python 爬虫源码 (核心逻辑)
    │   ├── process.py        # 命令行入口
    │   └── ...
    ├── clash/                # Clash 内核
    └── subconverter/         # 订阅转换工具
```

---

## 🚀 快速开始

### 方式一：直接运行 (推荐)

适合绝大多数用户。

1. **配置 Gist**: 进入 `runtime` 目录，打开 `my-config.json`，填入您的 GitHub Gist ID 和 Token。
2. **启动程序**: 返回根目录，双击 `NodeHorizon.exe`。
3. **开始使用**: 点击界面的"启动抓取"按钮。

### 方式二：源码运行 (开发者/调试)

如果您遇到问题，或者希望查看详细的调试日志，可以直接运行 Python 源码。

#### 1. 环境准备

- **Python**: 需要安装 Python 3.10+
- **依赖安装**:

  ```powershell
  # 在项目根目录下运行
  pip install -r requirements.txt
  ```

#### 2. 运行命令

```powershell
# 进入源码目录
cd runtime/subscribe

# 运行核心脚本 (配置文件在 runtime 根目录)
python process.py ../my-config.json
```

---

## 🔧 常见问题

### 1. 程序闪退 / 无法启动

- 请确保 `F:\NodeHorizon_Portable` 路径问题已修复（如有）。
- 尝试使用"方式二"运行 Python 脚本，查看具体报错信息。

### 2. 依赖缺失

- 如果源码运行时报错 `ModuleNotFoundError`，请重新运行 `pip install -r requirements.txt`。

---

## 🐛 调试指南

### 1. 命令行调试 (推荐)

如果您发现 GUI 界面没有响应或日志不完整，建议直接使用命令行运行核心脚本。

**查看帮助**:

```powershell
cd runtime/subscribe
python process.py --help
```

**运行并查看实时输出**:

```powershell
# 运行完整流程
python process.py ../my-config.json

# 仅执行连通性测试 (不抓取)
python process.py ../my-config.json --check

# 使用指定线程数 (默认64)
python process.py ../my-config.json -n 32
```

### 2. 日志文件分析

系统会自动记录详细运行日志，位置：`runtime/workflow.log`。
当程序出错时，请优先检查此文件末尾的 `Traceback` 信息。

---

## 📦 打包与分发指南

如果您修改了配置或源码，想将其分享给其他人，请遵循以下打包步骤：

### 1. 清理环境 (重要)

在打包前，请删除以下临时文件以减小体积并保护隐私：

- **日志文件**: 删除 `runtime/workflow.log`
- **缓存文件**: 删除 `runtime/subscribe/__pycache__` 文件夹
- **历史数据**: 清空 `runtime/data/` 目录 (可选)
- **敏感信息**: 检查 `my-config.json`，确保 `gistToken` 已被清空或替换为占位符。

### 2. 压缩打包

直接压缩整个 `NodeHorizon` 文件夹为 ZIP 或 7z 格式即可。

---

## 📄 版权信息

- 本软件包含完整源代码，仅供学习交流。
- 具体协议请参阅 `LICENSE`。
